
{% extends 'base.html' %}

{% block title %}<title>Detail</title>{% endblock %}

{% block content %}
    {% include 'navbar.html' %}
    <h1>
        Title : {{post.title}} <br>
        <a href="{% url 'like_post' post.pk  %}">
        {% if user in post.likes.all %}
            <span style="color: red;"> ♥︎ </span>
        {% else %}
            <span style="color: gray;"> ♡ </span>
        {% endif %}
        </a>
        - {{post.likes.count}} like{{post.likes.count|pluralize}} - 

    
        ({% for each_user in post.likes.all %}
            <a href="{% url 'profile' each_user.pk %}">{{each_user.username}}</a> /
        {% endfor %})
    </h1>
    {% if post.photo %}
        <img src="{{post.photo.url}}" alt="" style="width: 600px;"><br>
    {% endif %}
    <p>{{post.body|linebreaks}}</p>
    <h3>Created at {{post.created_date}}</h3>
    Posted by <a href="{% url 'profile' post.user.pk %}">{{post.user}}</a>

    {% if user.username == post.user.username %}
        <a href="{% url 'edit' post.pk %}">Edit post</a>
        <a href="{% url 'delete_post' post.pk %}">Delete post</a>
    {% endif %}


    <hr><h1>Comment</h1>
    {% for comment in comments %}
        <p style="border: solid 1px gray">{{comment.body}} /
        {{comment.created_date}} / <a href="{% url 'profile' comment.user.pk %}">{{comment.user}}</a> /
        
        {% if request.user.pk == comment.user.pk %}
            <a href="{% url 'delete_comment' post.pk comment.pk %}">Delete</a>
        {% endif %}
        </p>
    {% endfor %}
    <form action="{% url 'comment' post.pk %}" method="post">{% csrf_token %}
        <label for="comment">Comment</label>
        <textarea type="text" id="comment" name="body">{{comment}}</textarea>
        <input type="submit" value="submit">
    </form>



    <!-- <form action="">
        <label for="userstatus">User Status</label>
        <select id="userstatus" name="userstatus">
            <option value="idle">idle</option>
            <option value="active">active</option>
            <option value="deactivated">deactivated</option>
        </select>

        
        <input list="post">
            <datalist id="post">
                <option value="user1">user1</option>
                <option value="user2">user2</option>
            </datalist>
        
    </form> -->
{% endblock %}